---
title : README.md
begin : 2025-09-15 00:21
---

スピログラフ研究
==============

「スピログラフ」(「スピロトット」) の様な画像を描こうと、プログラムを作成してみました。

正確には、円の内側を小円が周回するものではなく、円の"外側"を小円が周回した時に、小円の中の座標が描く軌跡を表示するものであります。

今は Xt, Xlib で作成しておりますが、何れ、機会をみて V gg で書き換えたく思います。


## 作成方法

Xt, Xlib を使っておりますので、この辺りをコンパイルできるように準備してください。

準備できたら、
```
$ cc -o spiro spiro.c -lXt -lX11 -lm
```
の様な感じでコンパイルすれば、バイナリ作成、オッケーですだよ。


## usage and dosage

出来上がったバイナリに、以下の順で数値を設定出来ます。

```
./spiro  '小円の半径'  '小円の軌跡を残す半径'  '周回円の横長'  '周回円の縦長'
```
但し、この順番の範囲で、省略する事が出来ます。省略時の値はつぎの様になっております。

-   '小円の半径'    (省略時  70 )
-   '小円の軌跡を残す半径'   (省略時  70 )
-   '周回円の横長'   (省略時  100 )
-   '周回円の縦長'   (省略時  100 )

途中の値を省略時の数値にしておくには、値の代わりに @ を使う事ができます。

例えば、周回円の横長を 120 にするだけならば、
```
./spiro  @ @ 120
```
の様にします。


## code Insider

元々、円の内側を小円が周回する、という事で考えたのですが、円を楕円にしたら、横長になって面白い ? と思い、そうすると、楕円の内側で小円が周回するには、小円が動ける様に大きさに制約が生じるのではないか、という懸念があり、だったら、楕円の外側を周回させようと思いついた次第。

しかし、円(楕円) の周囲を周回するにあたり、小円は円(楕円)に接して回転するので、円(楕円)と小円の接触位置までの円弧長を計算する必要があります。円弧長に応じて、小円が回転するのですが、周回円が正円ならば、円弧長は簡単に求まるものの、楕円の場合は、複雑怪奇な特殊関数が必要になるそうで、それを追求するのは面倒な為、楕円弧長を計算するため、台形公式による数値積分を使って、お手軽に済ませております。

本来ならば、小円の中に「ペン先を差す穴」を自在に設定できそうなものではありますが、まだ、この機能は導入できておりません。

トップレベルのウィンドウに直接点を描くという暴挙をしていて、少し不具合があります。
Xサーバーとのツウシンが滞る様な状況 (サスペンドからの復帰や、他のアプリ終了のメモリ解放がうまく進んでいないため、新規アプリ起動時に若干のタイムラグが生じる様です)では、スクリーン中央に描く周回(楕)円の描図が間に合わない場合があります。一応、周回(楕)円の描図には、少し時間を掛ける様にしているのですが、焼け石に水 ... ?

プログラムは、まだ整理できるはずでありますが、今後、V gg に移植する積りなので、整理するのは後回しであります。


いじょ

